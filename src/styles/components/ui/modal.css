/* =============================================================================
   MODAL STYLES - Premium Modal Design System
   ============================================================================= */

/* Modal Typography Fix - Override Tailwind preflight in modal contexts */
[role='dialog'] p,
.modal-content p {
  margin: 0 !important;
}

/* Ensure error/success message paragraphs have no margin in feedback contexts */
.feedback-message p {
  margin: 0 !important;
}

/* ===================================================================== */
/* PREMIUM MODAL DESIGN SYSTEM - Award-Winning Visual Foundation */
/* ===================================================================== */

/* Modal backdrop with premium blur and overlay effects */
.modal-backdrop {
  background:
    radial-gradient(
      circle at 50% 50%,
      rgba(59, 130, 246, 0.15) 0%,
      transparent 70%
    ),
    linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 100%);
  backdrop-filter: blur(12px) saturate(1.2);
  -webkit-backdrop-filter: blur(12px) saturate(1.2);
}

/* Premium modal container with glass morphism */
.modal-container {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px) saturate(1.3);
  -webkit-backdrop-filter: blur(20px) saturate(1.3);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow:
    0 25px 50px -12px rgba(0, 0, 0, 0.25),
    0 0 0 1px rgba(255, 255, 255, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.dark .modal-container {
  background: rgba(15, 15, 15, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow:
    0 25px 50px -12px rgba(0, 0, 0, 0.5),
    0 0 0 1px rgba(255, 255, 255, 0.02),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* Modal containers - static positioning for optimal UX */
.modal-float {
  /* No animation - keep modals perfectly stable */
  animation: none;
  transform: none;

  /* Preserve sharp text rendering and visual quality */
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Enhanced text rendering classes for modal content */
.subpixel-antialiased {
  -webkit-font-smoothing: subpixel-antialiased;
  -moz-osx-font-smoothing: auto;
}

.text-rendering-optimized {
  text-rendering: geometricPrecision;
  font-feature-settings: 'kern' 1;
  font-kerning: normal;
}

.transform-3d-fix {
  /* Force hardware acceleration while preserving text quality */
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
}

/* Ensure all content within modals renders sharply */
.modal-float *,
.modal-float input,
.modal-float textarea,
.modal-float button {
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===================================================================== */
/* MOBILE VIEWPORT HEIGHT FIX - Prevents content cutoff on mobile */
/* ===================================================================== */

/* Fix for mobile browsers where 100vh includes browser chrome */
@supports (height: 100dvh) {
  .modal-container,
  [role='dialog'] {
    max-height: 100dvh !important;
  }
}

/* Ensure modal content areas have sufficient bottom padding on mobile */
@media (max-width: 640px) {
  .modal-content > div:last-child,
  [role='dialog'] > div:last-child {
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 4rem) !important;
  }
}

/* Ensure dialog containers don't have cursor pointer */
[role='dialog'],
[data-state='open'][role='dialog'],
[data-state='closed'][role='dialog'],
.modal-container,
.modal-content {
  cursor: default !important;
}

/* MODAL UTILITIES - Consolidated Tailwind v4 approach */
/* ===================================================================== */

/* Modal gradient backgrounds */
@utility modal-gradient {
  --gradient-from: rgb(248 250 252);
  --gradient-via: rgb(238 242 255);
  --gradient-to: rgb(226 232 240);
  background: linear-gradient(
    to bottom right,
    var(--gradient-from),
    var(--gradient-via),
    var(--gradient-to)
  );
}

/* Modal text utilities */
@utility modal-subtitle {
  @apply text-sm text-gray-600 text-center max-w-md mx-auto sm:text-base;
}

/* Modal icon gradients */
@utility modal-icon-gradient {
  --icon-from: rgb(59 130 246);
  --icon-to: rgb(147 51 234);
  background: linear-gradient(
    to bottom right,
    var(--icon-from),
    var(--icon-to)
  );
  box-shadow: 0 25px 50px -12px rgb(59 130 246 / 0.25);
}

/* Modal title gradients */
@utility modal-title-gradient {
  --title-from: rgb(17 24 39);
  --title-via: rgb(99 102 241);
  --title-to: rgb(107 33 168);
  background: linear-gradient(
    to right,
    var(--title-from),
    var(--title-via),
    var(--title-to)
  );
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  line-height: 1.5;
}