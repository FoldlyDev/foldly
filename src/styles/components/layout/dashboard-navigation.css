/* =============================================================================
   DASHBOARD NAVIGATION - RESPONSIVE STYLES
   ============================================================================= */

/* Dashboard Navigation - Mobile-First Responsive Design */
@layer components {
  /* =========================================================================
     BASE LAYOUT & STRUCTURE
     ========================================================================= */

  .dashboard-navigation {
    /* Base Layout Variables - Mobile First (320px+) */
    --nav-padding: 0.75rem;
    --nav-item-spacing: 0.125rem;
    --nav-section-spacing: 0.75rem;
    --nav-header-height: auto;
    --nav-width-expanded: 16rem; /* 256px */
    --nav-width-collapsed: 5rem; /* 80px */
    --nav-mobile-width: 16rem; /* 256px */

    /* Base Typography Variables */
    --nav-text-size: 0.875rem; /* 14px */
    --nav-text-weight: 500;
    --nav-section-text-size: 0.6875rem; /* 11px */
    --nav-section-text-weight: 600;
    --nav-badge-text-size: 0.625rem; /* 10px */

    /* Icon Variables */
    --nav-icon-size: 1rem;
    --nav-icon-container-size: 2rem;
    --nav-icon-radius: 0.5rem;
    --nav-transition: all 0.2s ease;

    position: relative;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
  }

  /* =========================================================================
     COLOR SYSTEM - Light Mode
     ========================================================================= */

  .dashboard-navigation {
    /* Define RGB values for primary color */
    --primary-rgb: 195, 225, 247; /* #c3e1f7 in RGB */
    
    /* Define missing base variables */
    --background: #ffffff;
    --border: #e5e7eb;
    --card: #ffffff;
    --success-green: #10b981;
    --primary: #c3e1f7;
    
    /* Background & Borders */
    --nav-sidebar-bg: var(--background);
    --nav-sidebar-border: var(--border);
    --nav-sidebar-blur: 12px;
    --nav-shadow:
      0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);

    /* Text Colors */
    --nav-text-default: var(--neutral-700);
    --nav-text-muted: var(--neutral-500);
    --nav-text-hover: var(--neutral-900);
    --nav-text-active: var(--neutral-900);
    --nav-section-text: var(--neutral-500);

    /* Icon Colors by Type */
    --nav-icon-default: var(--neutral-700);
    --nav-icon-primary: #5580a3;
    --nav-icon-secondary: #6b8ca6;
    --nav-icon-tertiary: #3a5f7d;
    --nav-icon-success: #14a074;

    /* Icon Backgrounds */
    --nav-icon-bg-primary: rgba(195, 225, 247, 0.15);
    --nav-icon-bg-secondary: rgba(154, 190, 222, 0.15);
    --nav-icon-bg-tertiary: rgba(45, 79, 107, 0.15);
    --nav-icon-bg-success: rgba(16, 185, 129, 0.15);

    /* Icon Hover States */
    --nav-icon-hover-primary: #4470a0;
    --nav-icon-hover-secondary: #5a7c99;
    --nav-icon-hover-tertiary: #2d4f6b;
    --nav-icon-hover-success: #059669;
    --nav-icon-hover-bg-primary: rgba(195, 225, 247, 0.25);
    --nav-icon-hover-bg-secondary: rgba(154, 190, 222, 0.25);
    --nav-icon-hover-bg-tertiary: rgba(45, 79, 107, 0.25);
    --nav-icon-hover-bg-success: rgba(16, 185, 129, 0.25);

    /* Icon Active States */
    --nav-icon-active-primary: #c3e1f7;
    --nav-icon-active-secondary: #9abede;
    --nav-icon-active-tertiary: #2d4f6b;
    --nav-icon-active-success: #10b981;

    /* Navigation Item States */
    --nav-item-hover-bg: var(--neutral-100);
    --nav-item-active-bg: rgba(var(--primary-rgb), 0.1);
    --nav-active-indicator: var(--primary);

    /* Toggle Button */
    --nav-toggle-icon: var(--neutral-600);
    --nav-toggle-icon-hover: var(--neutral-800);
    --nav-toggle-bg: var(--card);
    --nav-toggle-bg-hover: rgba(var(--primary-rgb), 0.1);
    --nav-toggle-border: var(--border);
    --nav-toggle-border-hover: var(--primary);
  }

  /* =========================================================================
     COLOR SYSTEM - Dark Mode
     ========================================================================= */

  .dark .dashboard-navigation {
    /* Define RGB values for primary color in dark mode */
    --primary-rgb: 154, 190, 222; /* #9abede in RGB */
    
    /* Define missing base variables for dark mode */
    --background: #09090b;
    --border: rgba(255, 255, 255, 0.1);
    --card: rgba(255, 255, 255, 0.05);
    --success-green: #10b981;
    --primary: #9abede;
    
    /* Background & Borders */
    --nav-sidebar-bg: rgba(2, 6, 24, 0.85);
    --nav-sidebar-border: rgba(255, 255, 255, 0.1);
    --nav-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);

    /* Text Colors */
    --nav-text-default: rgba(255, 255, 255, 0.85);
    --nav-text-muted: rgba(255, 255, 255, 0.4);
    --nav-text-hover: white;
    --nav-text-active: white;
    --nav-section-text: rgba(255, 255, 255, 0.4);

    /* Icon Colors by Type */
    --nav-icon-default: rgba(255, 255, 255, 0.8);
    --nav-icon-primary: #a8d0ea;
    --nav-icon-secondary: #8fb5d6;
    --nav-icon-tertiary: #9bb8d3;
    --nav-icon-success: #34d399;

    /* Icon Backgrounds */
    --nav-icon-bg-primary: rgba(195, 225, 247, 0.12);
    --nav-icon-bg-secondary: rgba(154, 190, 222, 0.12);
    --nav-icon-bg-tertiary: rgba(123, 165, 199, 0.12);
    --nav-icon-bg-success: rgba(16, 185, 129, 0.12);

    /* Icon Hover States */
    --nav-icon-hover-primary: #c3e1f7;
    --nav-icon-hover-secondary: #9abede;
    --nav-icon-hover-tertiary: #a8c5df;
    --nav-icon-hover-success: #10b981;
    --nav-icon-hover-bg-primary: rgba(195, 225, 247, 0.18);
    --nav-icon-hover-bg-secondary: rgba(154, 190, 222, 0.18);
    --nav-icon-hover-bg-tertiary: rgba(123, 165, 199, 0.18);
    --nav-icon-hover-bg-success: rgba(16, 185, 129, 0.18);

    /* Icon Active States */
    --nav-icon-active-primary: #9abede;
    --nav-icon-active-secondary: #7ba5c7;
    --nav-icon-active-tertiary: #4a6b85;
    --nav-icon-active-success: #10b981;

    /* Navigation Item States */
    --nav-item-hover-bg: rgba(255, 255, 255, 0.05);
    --nav-item-active-bg: rgba(var(--primary-rgb), 0.2);
    --nav-active-indicator: var(--primary);

    /* Toggle Button */
    --nav-toggle-icon: rgba(255, 255, 255, 0.6);
    --nav-toggle-icon-hover: rgba(255, 255, 255, 0.8);
    --nav-toggle-bg: rgba(255, 255, 255, 0.05);
    --nav-toggle-bg-hover: rgba(255, 255, 255, 0.1);
    --nav-toggle-border: rgba(255, 255, 255, 0.1);
    --nav-toggle-border-hover: rgba(255, 255, 255, 0.2);
  }

  /* =========================================================================
     NAVIGATION SIDEBAR BACKGROUNDS
     ========================================================================= */

  /* Base Sidebar Styles */
  .nav-sidebar-desktop,
  .nav-sidebar-mobile {
    background: var(--nav-sidebar-bg);
    backdrop-filter: blur(var(--nav-sidebar-blur));
    -webkit-backdrop-filter: blur(var(--nav-sidebar-blur));
    border-right: 1px solid var(--nav-sidebar-border);
    box-shadow: var(--nav-shadow);
    transition: var(--nav-transition);
  }

  /* Mobile Menu Button */
  .nav-menu-button {
    background: var(--nav-sidebar-bg);
    backdrop-filter: blur(var(--nav-sidebar-blur));
    -webkit-backdrop-filter: blur(var(--nav-sidebar-blur));
    border: 1px solid var(--nav-sidebar-border);
    transition: var(--nav-transition);
  }

  /* Desktop Toggle Button */
  .nav-toggle-button {
    background: var(--nav-toggle-bg);
    border: 1px solid var(--nav-toggle-border);
    transition: var(--nav-transition);
  }

  .nav-toggle-button:hover {
    background: var(--nav-toggle-bg-hover);
    border-color: var(--nav-toggle-border-hover);
  }

  /* =========================================================================
     NAVIGATION ICON SYSTEM
     ========================================================================= */

  /* Base Icon Styles */
  .nav-icon {
    width: var(--nav-icon-size);
    height: var(--nav-icon-size);
    transition: var(--nav-transition);
    color: currentColor;
  }

  /* Icon Container Base */
  .nav-icon-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--nav-icon-container-size);
    height: var(--nav-icon-container-size);
    min-width: var(--nav-icon-container-size);
    min-height: var(--nav-icon-container-size);
    border-radius: var(--nav-icon-radius);
    transition: var(--nav-transition);
    position: relative;
    color: var(--nav-icon-default);
    flex-shrink: 0;
  }

  /* Icon Glow Effect */
  .nav-icon-container::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: calc(100% + 8px);
    height: calc(100% + 8px);
    border-radius: calc(var(--nav-icon-radius) + 0.25rem);
    background: inherit;
    opacity: 0;
    filter: blur(10px);
    transition: opacity 0.2s ease;
    z-index: -1;
  }

  .nav-icon-container:hover::after {
    opacity: 0.5;
  }

  /* Icon Type Variants */
  .nav-icon-container.nav-icon--primary {
    background: var(--nav-icon-bg-primary);
    color: var(--nav-icon-primary);
  }

  .nav-icon-container.nav-icon--secondary {
    background: var(--nav-icon-bg-secondary);
    color: var(--nav-icon-secondary);
  }

  .nav-icon-container.nav-icon--tertiary {
    background: var(--nav-icon-bg-tertiary);
    color: var(--nav-icon-tertiary);
  }

  .nav-icon-container.nav-icon--success {
    background: var(--nav-icon-bg-success);
    color: var(--nav-icon-success);
  }

  /* Active State */
  .nav-icon-container.nav-icon--active {
    color: white !important;
  }

  .nav-icon-container.nav-icon--active.nav-icon--primary {
    background: var(--nav-icon-active-primary);
  }

  .nav-icon-container.nav-icon--active.nav-icon--secondary {
    background: var(--nav-icon-active-secondary);
  }

  .nav-icon-container.nav-icon--active.nav-icon--tertiary {
    background: var(--nav-icon-active-tertiary);
  }

  .nav-icon-container.nav-icon--active.nav-icon--success {
    background: var(--nav-icon-active-success);
  }

  /* Hover States */
  @media (hover: hover) {
    .nav-icon-container:hover {
      transform: scale(1.05);
    }

    .nav-icon-container.nav-icon--primary:hover {
      background: var(--nav-icon-hover-bg-primary);
      color: var(--nav-icon-hover-primary);
    }

    .nav-icon-container.nav-icon--secondary:hover {
      background: var(--nav-icon-hover-bg-secondary);
      color: var(--nav-icon-hover-secondary);
    }

    .nav-icon-container.nav-icon--tertiary:hover {
      background: var(--nav-icon-hover-bg-tertiary);
      color: var(--nav-icon-hover-tertiary);
    }

    .nav-icon-container.nav-icon--success:hover {
      background: var(--nav-icon-hover-bg-success);
      color: var(--nav-icon-hover-success);
    }
  }

  /* Toggle Button Icons */
  .nav-toggle-icon {
    color: var(--nav-toggle-icon);
    transition: color 0.2s ease;
  }

  .nav-toggle-icon:hover {
    color: var(--nav-toggle-icon-hover);
  }

  /* =========================================================================
     RESPONSIVE TYPOGRAPHY - Mobile First with REM units
     ========================================================================= */

  /* Base Typography - Mobile First (320px+) */
  .nav-item-label {
    font-family: var(--font-body);
    font-size: var(--nav-text-size);
    line-height: 1;
    font-weight: var(--nav-text-weight);
    letter-spacing: -0.01em;
    transition: var(--nav-transition);
    color: var(--nav-text-default);
  }

  /* Active state */
  .nav-item-label--active {
    color: var(--nav-text-active);
    font-weight: 600;
  }

  /* Hover state */
  .nav-item:hover .nav-item-label,
  a.nav-item:hover .nav-item-label {
    color: var(--nav-text-hover);
  }

  .nav-section-header {
    font-family: var(--font-display);
    font-size: var(--nav-section-text-size);
    line-height: 1.2;
    font-weight: var(--nav-section-text-weight);
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--nav-section-text);
  }

  .nav-badge {
    font-family: var(--font-body);
    font-size: var(--nav-badge-text-size);
    line-height: 1;
    font-weight: 600;
    letter-spacing: 0.02em;
  }

  .nav-user-status {
    font-family: var(--font-body);
    font-size: 0.75rem; /* 12px */
    line-height: 1;
    font-weight: 500;
    color: var(--nav-text-muted);
  }

  /* Small Mobile (xs: 480px+) */
  @media (min-width: 30rem) {
    .dashboard-navigation {
      --nav-padding: 1rem;
      --nav-item-spacing: 0.125rem; /* Keep tight */
      --nav-section-spacing: 1rem;
    }

    .dashboard-navigation {
      --nav-icon-size: 1.125rem;
      --nav-icon-container-size: 2.25rem;
    }
  }

  /* Tablet (sm: 640px+) */
  @media (min-width: 40rem) {
    .dashboard-navigation {
      --nav-padding: 1.25rem;
      --nav-item-spacing: 0.125rem; /* Keep tight */
      --nav-section-spacing: 1.25rem;
    }
  }

  /* Medium Screens (md: 768px+) */
  @media (min-width: 48rem) {
    .dashboard-navigation {
      --nav-padding: 1.25rem; /* Don't make padding too large */
      --nav-section-spacing: 1.25rem;
    }
  }

  /* Large Screens (lg: 1024px+) */
  @media (min-width: 64rem) {
    .dashboard-navigation {
      --nav-padding: 1.25rem; /* Sidebar doesn't need huge padding */
      --nav-section-spacing: 1.25rem;
      --nav-shadow:
        0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .dashboard-navigation {
      --nav-icon-size: 1.25rem;
      --nav-icon-container-size: 2.5rem;
    }
  }

  /* Extra Large (xl: 1280px+) */
  @media (min-width: 80rem) {
    .dashboard-navigation {
      --nav-padding: 1.5rem; /* Reasonable padding */
    }
  }

  /* 2XL Screens (2xl: 1536px+) */
  @media (min-width: 96rem) {
    .dashboard-navigation {
      --nav-padding: 1.5rem; /* Keep consistent */
      --nav-text-size: 0.9375rem; /* 15px - Slightly larger for big screens */
    }
  }

  /* Ultra Wide (3xl: 1920px+) */
  @media (min-width: 120rem) {
    .dashboard-navigation {
      --nav-padding: 1.5rem; /* Keep consistent */
    }
  }

  /* =========================================================================
     NAVIGATION LAYOUT COMPONENTS
     ========================================================================= */

  /* Navigation Header */
  .nav-header {
    padding: var(--nav-padding);
    padding-bottom: calc(var(--nav-padding) * 0.75);
    border-bottom: 1px solid var(--nav-sidebar-border);
  }

  /* Navigation Body */
  .nav-body {
    flex: 1;
    padding: var(--nav-padding);
    padding-top: calc(var(--nav-padding) * 0.75);
    overflow-y: auto;
    overflow-x: hidden;
  }

  /* Navigation Footer */
  .nav-footer {
    padding: var(--nav-padding);
    border-top: 1px solid var(--nav-sidebar-border);
  }

  /* Navigation Sections */
  .nav-section {
    margin-bottom: var(--nav-section-spacing);
  }

  .nav-section:last-child {
    margin-bottom: 0;
  }

  /* Ensure section content is visible */
  .nav-section > div {
    display: block;
  }

  /* Navigation Items Container */
  .nav-items-container {
    display: flex;
    flex-direction: column;
    gap: var(--nav-item-spacing);
  }

  /* Navigation Items */
  .nav-item {
    margin-bottom: var(--nav-item-spacing);
    width: 100%;
  }

  /* Ensure Link component renders properly */
  .nav-item a {
    display: block;
    text-decoration: none;
    color: inherit;
  }

  .nav-item:last-child {
    margin-bottom: 0;
  }

  /* Navigation Item States */
  .nav-item > div {
    position: relative;
  }

  /* Since Link component is the .nav-item, target the direct child div */
  a.nav-item > div {
    position: relative;
  }


  /* Active Indicator */
  .nav-active-indicator {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--nav-active-indicator);
    border-radius: 0 1px 1px 0;
  }

  /* =========================================================================
     NAVIGATION STATE VARIATIONS
     ========================================================================= */

  /* Active state typography */
  .nav-item-label--active {
    font-weight: 600;
  }

  /* Hover state typography */
  @media (hover: hover) {
    .nav-item-label:hover {
      font-weight: 600;
    }
  }

  /* Navigation State Management */
  .nav-collapsed .nav-show-expanded {
    opacity: 0;
    width: 0;
    overflow: hidden;
    transition:
      opacity 0.2s ease,
      width 0.2s ease;
  }

  .nav-expanded .nav-show-expanded {
    opacity: 1;
    width: auto;
  }

  /* Collapsed State Adjustments */
  .nav-collapsed .nav-item-label,
  .nav-collapsed .nav-section-header,
  .nav-collapsed .nav-user-status {
    opacity: 0;
    width: 0;
    overflow: hidden;
  }

  .nav-collapsed .nav-icon-container {
    margin: 0 auto;
  }

  /* =========================================================================
     CUSTOM SCROLLBAR STYLES
     ========================================================================= */

  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: var(--neutral-300) var(--neutral-100);
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: var(--neutral-100);
    border-radius: 3px;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background: var(--neutral-300);
    border-radius: 3px;
    transition: background-color 0.2s ease;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: var(--neutral-400);
  }

  /* Dark mode scrollbar */
  .dark .scrollbar-thin {
    scrollbar-color: var(--neutral-600) var(--neutral-800);
  }

  .dark .scrollbar-thin::-webkit-scrollbar-track {
    background: var(--neutral-800);
  }

  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
    background: var(--neutral-600);
  }

  .dark .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: var(--neutral-500);
  }

  /* =========================================================================
     ANIMATIONS
     ========================================================================= */

  /* Navigation Item Animations */
  .nav-item-entrance {
    animation: slideInFromLeft 0.3s ease-out;
  }

  @keyframes slideInFromLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Glow Effect for Active Items */
  .active-glow {
    box-shadow: 0 0 20px var(--primary-subtle);
  }

  /* Smooth Badge Animations */
  .badge-bounce {
    animation: bounceIn 0.5s ease-out;
  }

  @keyframes bounceIn {
    0% {
      opacity: 0;
      transform: scale(0.3);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
    70% {
      transform: scale(0.9);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* =========================================================================
     ACCESSIBILITY & PERFORMANCE
     ========================================================================= */

  /* High contrast mode */
  @media (prefers-contrast: high) {
    .nav-item-label {
      font-weight: 600;
    }

    .nav-section-header {
      font-weight: 700;
      opacity: 0.9;
    }

    .nav-icon-container {
      border: 1px solid currentColor;
    }
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .nav-item-label,
    .nav-section-header,
    .nav-badge,
    .nav-user-status,
    .nav-icon,
    .nav-icon-container {
      transition: none;
    }

    .nav-item-entrance {
      animation: none;
    }

    .badge-bounce {
      animation: none;
    }
  }

  /* Mobile Touch Optimizations */
  @media (max-width: 1024px) {
    .dashboard-navigation {
      -webkit-overflow-scrolling: touch;
    }
    
    /* Improve mobile sidebar performance */
    .nav-sidebar-mobile {
      transform: translateZ(0);
      -webkit-transform: translateZ(0);
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      perspective: 1000;
      -webkit-perspective: 1000;
    }
    
    /* Prevent text selection during swipe */
    .nav-sidebar-mobile * {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  }

  /* Print Styles */
  @media print {
    .dashboard-navigation {
      display: none;
    }
  }

  /* Performance Optimizations */
  .dashboard-navigation {
    will-change: width;
  }

  .nav-icon-container {
    will-change: transform, background-color;
  }

  /* Navigation Responsive Utilities */
  .nav-hide-mobile {
    @media (max-width: 1023px) {
      display: none;
    }
  }

  .nav-hide-desktop {
    @media (min-width: 1024px) {
      display: none;
    }
  }
}
